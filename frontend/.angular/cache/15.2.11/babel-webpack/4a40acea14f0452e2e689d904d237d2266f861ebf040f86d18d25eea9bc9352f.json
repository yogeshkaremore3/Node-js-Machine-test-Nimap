{"ast":null,"code":"import { __decorate } from \"tslib\";\nimport { Component } from \"@angular/core\";\nlet ProductsComponent = class ProductsComponent {\n  constructor(http) {\n    this.http = http;\n    this.products = [];\n    this.page = 1;\n    this.size = 10;\n    this.totalPages = 1;\n    this.count = 0;\n  }\n  ngOnInit() {\n    this.load();\n  }\n  load() {\n    this.http.get(`/api/products?page=${this.page}&size=${this.size}`).subscribe(res => {\n      this.products = res.data;\n      this.page = res.page;\n      this.size = res.size;\n      this.totalPages = res.totalPages;\n      this.count = res.count;\n    });\n  }\n  go(p) {\n    if (p < 1) p = 1;\n    if (p > this.totalPages) p = this.totalPages;\n    this.page = p;\n    this.load();\n  }\n  setSize(s) {\n    this.size = s;\n    this.page = 1;\n    this.load();\n  }\n  deleteProduct(id) {\n    if (confirm(\"Delete?\")) this.http.delete(`/api/products/${id}`).subscribe(() => this.load());\n  }\n};\nProductsComponent = __decorate([Component({\n  template: `<div style=\"display:flex;justify-content:space-between;align-items:center\"><h2>Products</h2><a routerLink=\"/products/new\" class=\"button\">+ New Product</a></div><p>Server-side pagination. Page {{page}}/{{totalPages}} (size {{size}}, total {{count}})</p><table><thead><tr><th>ProductId</th><th>ProductName</th><th>CategoryName</th><th>CategoryId</th><th>Actions</th></tr></thead><tbody><tr *ngFor=\"let p of products\"><td>{{p.ProductId}}</td><td>{{p.ProductName}}</td><td>{{p.CategoryName}}</td><td>{{p.CategoryId}}</td><td><a [routerLink]=['/products/edit',p.ProductId]>Edit</a> <a href=\"#\" (click)=\"deleteProduct(p.ProductId);$event.preventDefault()\" style=\"color:red;margin-left:8px\">Delete</a></td></tr></tbody></table><div style=\"margin-top:16px\"><button (click)=\"go(1)\" [disabled]=\"page===1\">First</button><button (click)=\"go(page-1)\" [disabled]=\"page===1\">Prev</button><span style=\"margin:0 8px\">{{page}}</span><button (click)=\"go(page+1)\" [disabled]=\"page===totalPages\">Next</button><button (click)=\"go(totalPages)\" [disabled]=\"page===totalPages\">Last</button><span style=\"margin-left:12px\">Size: <a href=\"#\" (click)=\"setSize(5);$event.preventDefault()\">5</a> | <a href=\"#\" (click)=\"setSize(10);$event.preventDefault()\">10</a> | <a href=\"#\" (click)=\"setSize(20);$event.preventDefault()\">20</a></span></div>`\n})], ProductsComponent);\nexport { ProductsComponent };","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}